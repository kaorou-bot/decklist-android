# v5.2.0 发布说明

## 版本信息
- **版本号**: v5.2.0
- **版本代码**: 88
- **发布日期**: 2025-02-20
- **基于**: v5.1.0

## 新增功能

### 1. 卡牌分类排序 ✨
套牌详情页现在按卡牌类型分类显示，方便浏览和查找卡牌。

**分类顺序:**
- 🏜️ 地 (Land)
- 🐾 生物 (Creature)
- 📜 法术 (Sorcery)
- ⚡ 瞬间 (Instant)
- ⚔️ 神器 (Artifact)
- 🌟 结界 (Enchantment)
- 🧙 鹏洛克 (Planeswalker)
- 📦 其他

**特性:**
- 自动识别中英文类型名称
- 多类别卡牌按优先级分类
- 清晰的分类标题和分隔线

## 移除功能

### 1. 赛事下载按钮
移除了主页面的"下载赛事"按钮及相关功能，简化用户界面。

**原因:**
- 用户可以通过服务器端自动同步赛事数据
- 减少界面复杂度

### 2. 套牌下载按钮
移除了赛事详情页的"下载所有套牌"按钮及相关功能。

**原因:**
- 套牌数据在打开详情页时自动加载
- 无需手动下载

## 改进

### 1. 隐藏空赛事
- 自动隐藏 `deck_count` 为 0 的赛事
- 只显示有套牌数据的赛事
- 提升用户体验

## 技术改进

### 新增文件
- `item_card_type_header.xml`: 卡牌分类标题布局

### 修改文件
- `DeckDetailActivity.kt`:
  - 恢复并改进 `populateCardList()` 方法
  - 支持中英文类型识别
- `MainActivity.kt`: 移除下载按钮相关代码
- `EventDetailActivity.kt`: 移除下载按钮相关代码
- `activity_main.xml`: 移除下载按钮布局
- `activity_event_detail.xml`: 移除下载按钮布局
- `MainViewModel.kt`: 添加空赛事过滤逻辑

## 已知问题

### 部分卡牌缺少中文规则文本
某些卡牌（特别是新系列）的规则文本显示为英文，因为服务器端尚未提供 `oracleTextZh` 字段。

**影响范围:**
- 斑隆洛 (Bloomburrow) 系列部分卡牌
- 其他最新系列的部分卡牌

**解决方案:**
- 服务器端补充中文规则文本数据
- 客户端已自动回退到英文显示，不影响使用

## 升级说明

### 从 v5.1.0 升级
1. 卸载旧版本
2. 安装 v5.2.0
3. 正常使用，数据自动兼容

### 数据兼容性
- ✅ 完全兼容旧版本数据
- ✅ 无需数据迁移
- ✅ 设置保留

## 下一步计划

### v5.3.0 规划
- [ ] 优化卡牌搜索性能
- [ ] 添加更多筛选选项
- [ ] 改进离线缓存机制

---
**发布人**: Claude Code
**审核状态**: ✅ 已测试
**部署状态**: 待发布
