# ç‰ˆæœ¬å‘å¸ƒè¯´æ˜ - v2.4.2

## ğŸ“¦ ç‰ˆæœ¬ä¿¡æ¯
- **ç‰ˆæœ¬å·**: v2.4.2
- **ç‰ˆæœ¬ä»£ç **: 16
- **å‘å¸ƒæ—¥æœŸ**: 2026-01-14
- **ç±»å‹**: ğŸ› Bug ä¿®å¤

---

## ğŸ› ä¿®å¤çš„é—®é¢˜

### 1. Loading æ¡†ä¸€ç›´æ˜¾ç¤º âœ…
**é—®é¢˜æè¿°**ï¼š
- æœç´¢æˆ–åŠ è½½ç‰Œç»„æ—¶ï¼ŒLoading æ¡†ä¸€ç›´æ˜¾ç¤ºï¼Œä¸ä¼šæ¶ˆå¤±
- å½±å“ï¼šç”¨æˆ·æ— æ³•çŸ¥é“æ“ä½œæ˜¯å¦å®Œæˆ

**æ ¹æœ¬åŸå› **ï¼š
- `loadDecklists()` æ–¹æ³•ä¸­æ²¡æœ‰æ­£ç¡®è®¾ç½® `uiState`
- Loading çŠ¶æ€åæ²¡æœ‰è®¾ç½®ä¸º Success æˆ– Error

**è§£å†³æ–¹æ¡ˆ**ï¼š
```kotlin
// ä¿®å¤å‰
_uiState.value = UiState.Loading
_decklists.postValue(items)
// ç¼ºå°‘ï¼š_uiState.value = UiState.Success

// ä¿®å¤å
_uiState.value = UiState.Loading
_decklists.postValue(items)
_uiState.value = UiState.Success("Loaded ${items.size} decklists")
```

**ä¿®æ”¹æ–‡ä»¶**ï¼š
- `MainViewModel.kt` - ä¿®å¤ `loadDecklists()` å’Œ `searchDecklists()`

---

### 2. æ—¥æœŸé€‰æ‹©å™¨é»˜è®¤å¹´ä»½ âœ…
**é—®é¢˜**ï¼š
- æ—¥æœŸé€‰æ‹©å™¨é»˜è®¤ä¸º 2025 å¹´ 1 æœˆ
- ä¸å¤Ÿæ–¹ä¾¿ï¼Œéœ€è¦æ‰‹åŠ¨é€‰æ‹©

**è§£å†³æ–¹æ¡ˆ**ï¼š
```kotlin
// ä¿®å¤å‰
DatePickerDialog(..., 2025, 0, 15)

// ä¿®å¤å
val calendar = Calendar.getInstance()
val year = calendar.get(Calendar.YEAR)
val month = calendar.get(Calendar.MONTH)
val day = calendar.get(Calendar.DAY_OF_MONTH)
DatePickerDialog(..., year, month, day)
```

**æ•ˆæœ**ï¼š
- é»˜è®¤å½“å‰æ—¥æœŸï¼ˆå¦‚ 2026-01-14ï¼‰
- æ›´ç¬¦åˆç”¨æˆ·é¢„æœŸ

---

### 3. MTGTop8 çˆ¬è™«æ”¹è¿› âœ…
**æ”¹è¿›å†…å®¹**ï¼š
- æ›´æ–° User-Agent ä¸º Chrome 120
- æ·»åŠ è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼ˆä¾¿äºè°ƒè¯•ï¼‰
- æ”¹è¿› HTML è§£æé€»è¾‘
- æ”¯æŒå¤šç§é“¾æ¥æ ¼å¼ï¼ˆ`deck?id=` å’Œ `deck?e=`ï¼‰
- æ›´å¥½çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

**æŠ€æœ¯æ”¹è¿›**ï¼š
```kotlin
// æ–°çš„ User-Agent
.userAgent("Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36")

// æ”¹è¿›çš„è§£æé€»è¾‘
val cells = event.select("td")
if (cells.size < 3) continue
val eventName = cells[1].text().trim()
val eventDate = cells[2].text().trim()

// æ”¯æŒå¤šç§é“¾æ¥æ ¼å¼
if (deckUrl.contains("deck?id=") || deckUrl.contains("deck?e=")) {
    // å¤„ç†é“¾æ¥
}
```

---

## ğŸ“ ä»£ç å˜æ›´

### ä¿®æ”¹çš„æ–‡ä»¶
```
âœ… MainViewModel.kt
   â”œâ”€â”€ ä¿®å¤ loadDecklists() - æ­£ç¡®è®¾ç½® uiState
   â”œâ”€â”€ ä¿®å¤ searchDecklists() - æ­£ç¡®è®¾ç½® uiState
   â””â”€â”€ åˆ é™¤é‡å¤ä»£ç 

âœ… MainActivity.kt
   â””â”€â”€ æ—¥æœŸé€‰æ‹©å™¨ä½¿ç”¨å½“å‰æ—¥æœŸ

âœ… MtgTop8Scraper.kt
   â”œâ”€â”€ æ›´æ–° User-Agent
   â”œâ”€â”€ æ”¹è¿› HTML è§£æ
   â”œâ”€â”€ æ·»åŠ è¯¦ç»†æ—¥å¿—
   â””â”€â”€ æ”¯æŒå¤šç§é“¾æ¥æ ¼å¼

âœ… app/build.gradle
   â””â”€â”€ ç‰ˆæœ¬å·æ›´æ–°åˆ° v2.4.2 (versionCode: 16)
```

### ä»£ç è¡Œæ•°å˜åŒ–
```
-30 è¡Œï¼ˆåˆ é™¤é‡å¤ä»£ç ï¼‰
+39 è¡Œï¼ˆæ–°åŠŸèƒ½ï¼‰
å‡€å˜åŒ–ï¼š+9 è¡Œ
```

---

## ğŸ“¦ APK ä¿¡æ¯

### æ–‡ä»¶è¯¦æƒ…
- ğŸ“± **æ–‡ä»¶å**: `decklist-manager-v2.4.2-debug.apk`
- ğŸ“ **å¤§å°**: 8.0 MB
- ğŸ“ **ä½ç½®**: `app/build/outputs/apk/debug/`
- ğŸ“¦ **å½’æ¡£**: `apk-archive/decklist-manager-v2.4.2-debug.apk`

### å®‰è£…æ–¹å¼
```bash
# é€šè¿‡ ADB å®‰è£…
adb install -r app/build/outputs/apk/debug/decklist-manager-v2.4.2-debug.apk
```

---

## ğŸ”„ ä» v2.4.1 å‡çº§

### å‡çº§æ­¥éª¤
1. å¸è½½æ—§ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼Œå¯ä»¥ç›´æ¥è¦†ç›–å®‰è£…ï¼‰
2. å®‰è£…æ–°çš„ v2.4.2 APK
3. æ•°æ®åº“ä¿æŒä¸å˜

### æ•°æ®å…¼å®¹æ€§
- âœ… æ•°æ®åº“ç»“æ„æ— å˜åŒ–
- âœ… å·²æœ‰æ•°æ®å®Œå…¨å…¼å®¹
- âœ… æ— éœ€æ¸…ç©ºæ•°æ®

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### Loading æ¡†æµ‹è¯•
1. **åŸºæœ¬åŠŸèƒ½æµ‹è¯•**ï¼š
   - æ‰“å¼€åº”ç”¨
   - ç­‰å¾…åŠ è½½å®Œæˆ
   - âœ… Loading æ¡†åº”è¯¥è‡ªåŠ¨æ¶ˆå¤±
   - âœ… æ˜¾ç¤ºç‰Œç»„åˆ—è¡¨æˆ–æç¤ºä¿¡æ¯

2. **æœç´¢æµ‹è¯•**ï¼š
   - åœ¨æœç´¢æ¡†è¾“å…¥å…³é”®è¯
   - ç‚¹å‡»æœç´¢
   - âœ… Loading æ¡†åº”è¯¥è‡ªåŠ¨æ¶ˆå¤±
   - âœ… æ˜¾ç¤ºæœç´¢ç»“æœ

### æ—¥æœŸé€‰æ‹©å™¨æµ‹è¯•
1. **é»˜è®¤å€¼æµ‹è¯•**ï¼š
   - ç‚¹å‡» "Web Scraping"
   - ç‚¹å‡» "Date" æŒ‰é’®
   - âœ… åº”æ˜¾ç¤ºå½“å‰æ—¥æœŸï¼ˆå¦‚ 2026-01-14ï¼‰

2. **æ—¥æœŸé€‰æ‹©æµ‹è¯•**ï¼š
   - é€‰æ‹©ä»»æ„æ—¥æœŸ
   - âœ… æ—¥æœŸæ­£ç¡®æ˜¾ç¤ºåœ¨æŒ‰é’®ä¸Š

### MTGTop8 çˆ¬å–æµ‹è¯•
1. **åŸºæœ¬çˆ¬å–æµ‹è¯•**ï¼š
   - ç‚¹å‡» "Web Scraping"
   - é€‰æ‹© Modern æ ¼å¼
   - ä¸é€‰æ—¥æœŸ
   - è®¾ç½®æœ€å¤§ç‰Œç»„æ•°ä¸º 5
   - ç‚¹å‡» "Start Scraping"
   - âœ… åº”è¯¥èƒ½æˆåŠŸçˆ¬å–ç‰Œç»„

---

## ğŸ“Š Git æäº¤

```
1468bc1 fix: ä¿®å¤loadingæ¡†å’Œæ—¥æœŸé€‰æ‹©å™¨ï¼Œæ”¹è¿›MTGTop8çˆ¬è™« v2.4.2
1d49632 docs: add release notes for v2.4.1
3888360 feat: æ·»åŠ  MTGTop8 æ—¥æœŸç­›é€‰ v2.4.1
```

---

## ğŸ”® å·²çŸ¥é—®é¢˜

### MTGTop8 çˆ¬è™«
âš ï¸ **æ³¨æ„**ï¼šMTGTop8 çš„ç½‘ç«™ç»“æ„å¯èƒ½éšæ—¶å˜åŒ–
- âœ… å·²æ·»åŠ è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- âœ… å·²æ›´æ–° User-Agent
- âœ… å·²æ”¯æŒå¤šç§é“¾æ¥æ ¼å¼

### å¦‚æœçˆ¬å–å¤±è´¥
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æŸ¥çœ‹ Logcat æ—¥å¿—ï¼ˆæœç´¢ "MtgTop8Scraper"ï¼‰
3. å°è¯•ä¸åŒçš„æ ¼å¼
4. å°è¯•æ›´å°‘çš„ç‰Œç»„æ•°é‡

---

## ğŸ’¡ ä½¿ç”¨æç¤º

### æ—¥æœŸé€‰æ‹©
- **æ‰€æœ‰æ—¥æœŸ**ï¼šä¸é€‰æ‹©æ—¥æœŸï¼Œç›´æ¥å¼€å§‹çˆ¬å–
- **ç‰¹å®šæ—¥æœŸ**ï¼šé€‰æ‹©æ—¥æœŸåï¼Œåªçˆ¬å–åŒ¹é…çš„ç‰Œç»„
- **æ¸…é™¤æ—¥æœŸ**ï¼šç‚¹å‡» "Clear Date" æŒ‰é’®

### Loading æ¡†
- æ­£å¸¸æƒ…å†µä¸‹ Loading ä¼šè‡ªåŠ¨æ¶ˆå¤±
- å¦‚æœä¸€ç›´æ˜¾ç¤ºï¼Œæ£€æŸ¥ Logcat æ—¥å¿—
- å¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–è§£æé”™è¯¯

---

## ğŸ‰ æ€»ç»“

v2.4.2 ä¿®å¤äº†ç”¨æˆ·åé¦ˆçš„å‡ ä¸ªé‡è¦é—®é¢˜ï¼š
- âœ… Loading æ¡†ä¸å†ä¸€ç›´æ˜¾ç¤º
- âœ… æ—¥æœŸé€‰æ‹©å™¨æ›´æ™ºèƒ½ï¼ˆé»˜è®¤å½“å‰æ—¥æœŸï¼‰
- âœ… MTGTop8 çˆ¬è™«æ›´ç¨³å®š

**æ¨èæ‰€æœ‰ç”¨æˆ·å‡çº§åˆ°æ­¤ç‰ˆæœ¬ï¼**

---

**å‘å¸ƒæ—¥æœŸ**: 2026-01-14
**ä¸‹ä¸€ç‰ˆæœ¬**: v2.5.0 (è®¡åˆ’ä¸­)
